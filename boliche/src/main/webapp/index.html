<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script type="text/javascript" src="https://unpkg.com/@c3r38r170/c3tools"></script>
	<script type="text/javascript">
		addEventListener('DOMContentLoaded',()=>{
			gEt('login').onclick=()=>{
				let estadoOk;
				sendPOST('/login',{
					username:gEt('user').value,
					password:gEt('pass').value
				})
					.then(res=>{
						estadoOk=res.ok;
						return res.text();
					})
					.then(texto=>{
						if(estadoOk)
							W.location=texto;
						else alert(texto);
					})
			}
			gEt('registrarse').onclick=()=>{
			};
			gEt('modal-form').onsubmit=function(){
				sendPOST('registro',{
					usuario:this['modal-user'].value
					,contrasena:this['modal-pass'].value
					,nickname:this['modal-name'].value
					,correo:this['modal-mail'].value
				})
					.then(res=>res.text())
					.then(res=>alert(res));
				return false;
			};
		})
	</script>
</head>
<body>

<!-- TODO: buscar un dise침o copado con esas etiquetas que se van para arriba -->
<label for="user">Nombre de usuario</label>
<input type="text" name="user" id="user">
<label for="pass">Contrase침a</label>
<input type="password" name="pass" id="pass">
<button id=login>Entrar</button>
<button id=registrarse>Registrarse</button>

<div id=modal>
	<form id=modal-form>
		<label for="modal-name">Nombre y Apellido</label>
		<input type="text" name="modal-name" id="modal-name" minlength=4 required>
		<label for="modal-user">Nombre de usuario</label>
		<input type="text" name="modal-user" id="modal-user" pattern="^[^\s]*$" minlength=4 required>
		<label for="modal-pass">Contrase침a</label>
		<input type="password" name="modal-pass" id="modal-pass" minlength=8 required>
		<label for="modal-mail">Correo Electr칩nico</label>
		<input type="email" name="modal-mail" id="modal-mail" required>
		<button id=modal-registrarse>Registrarse</button>
	</form>
</div>

</body>
</html>